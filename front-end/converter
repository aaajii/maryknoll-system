
urls

url(r'^subjectOffering-list/update/(?P<pk>\d+)$', views.updateOffering, name = 'subjectOffering-update'),
url(r'^subjectOffering-list/edit-form/(?P<pk>\d+)$', views.editOfferingForm, name = 'subjectOffering-edit-form'),

views

def updateOffering(request, pk='pk'):
    instance = get_object_or_404(Offering, pk=pk)
    return render(request, 'enrollment/subjectOffering-list-update.html', {'instance': instance})


def updateSubjectOfferingForm(request, pk='pk'):
    instance = get_object_or_404(Offering, pk=pk)
    data = {'form_is_valid' : False }
    try:
        last_subjectOffering = Offering.objects.latest('subjectOffering_ID')
    except:
        last_subjectOffering = None
    if request.method == 'POST':
        form = SubjectOfferingForms(request.POST, instance = instance)
        if form.is_valid():
            instance = form.save()
            instance.save()
            data['form_is_valid'] = True
        else:
            data['form_is_valid'] = False
    else:
        form = OfferingForms(instance = instance)
    context = {'form': form, 'subjectOffering':last_subjectOffering, 'instance': instance}
    data['html_form'] = render_to_string('enrollment/forms-subjectOffering-edit.html',
        context,
        request=request,
    )
    return JsonResponse(data)