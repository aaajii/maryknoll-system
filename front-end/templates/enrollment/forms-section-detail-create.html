{% load static %}
{% load widget_tweaks %}
<form action="{% url 'section-student-search' section.pk %}" method="POST" class="section-student-search">
{% csrf_token %}
          <div class="row">
            <div class="col">
              <h3 class="link" style="margin-top: 10px;"> Add Student to section</h3>
              
            </div>
          </div>
          <div class="row">
            <div class="col-md-4">
              <label>Student ID:</label>
              <input type="text" id="search" name="search">
              <!--<input type=submit value='search'> Auto generate-->
              
            </div>
          </div>
          <ul id="search-results">
            
          </ul>
          {%if student.count > 0 %}
          {for s in student%}
          <div class="row">
            
            <div class="col-md-4">
              <label>Student First Name:</label>
              <p class="form-control-static">{{student.student__first_name}}</p><!--auto generated by student ID-->
            </div>
            <div class="col-md-4">
              <label>Student Middle Name:</label>
              <p class="form-control-static">{{student.student__first_name}}</p>
            </div>
            <div class="col-md-4">
              <label>Student Last Name:</label>
              <p class="form-control-static">{{student.student__first_name}}</p>
            </div>
            
          </div>
          {% else %}
          <li> None to show! </li>
          {% endif %}
          <div class="btn-forms" style="display: flex; justify-content: flex-end">
            <a href="{%url 'section-detail' section.pk %}" class="btn btn-link">Cancel</a>
            <a href="#" class="btn btn-primary "><i class="fa fa-check-circle" aria-hidden="true"></i> Save Student to Section</a>
          </div>

</form>
<script>
$(function(){
  
  $('#search').keyup(function(){
    $.ajax({
      type: "POST",
      url: '{% url "section-student-search" section.pk %}',
      data: {
        'search_text': $('#search').val(),
        'csrfmiddlewaretoken': $("input[name=csrfmiddlewaretoken]").val()
      },
      success: searchSuccess,
      dataType: 'html'
      
    })
  })
})

function searchSuccess(data, textStatus, jqXHR){
  $('#search-results').html(data)
}
</script>
